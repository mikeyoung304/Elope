<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MAIS Widget Demo - Embedded & Modal Examples</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
      line-height: 1.6;
      color: #1f2937;
      background: #f9fafb;
    }

    /* Header */
    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 3rem 1.5rem;
      text-align: center;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .header h1 {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }

    .header p {
      font-size: 1.125rem;
      opacity: 0.95;
      max-width: 600px;
      margin: 0 auto;
    }

    /* Navigation */
    .nav {
      background: white;
      border-bottom: 1px solid #e5e7eb;
      padding: 1rem;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    }

    .nav-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    .nav-button {
      padding: 0.75rem 1.5rem;
      background: white;
      border: 2px solid #667eea;
      color: #667eea;
      font-weight: 600;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
      text-decoration: none;
      display: inline-block;
    }

    .nav-button:hover {
      background: #667eea;
      color: white;
      transform: translateY(-1px);
      box-shadow: 0 4px 6px rgba(102, 126, 234, 0.2);
    }

    /* Container */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem 1.5rem;
    }

    /* Section */
    .section {
      background: white;
      border-radius: 12px;
      padding: 2.5rem;
      margin-bottom: 2rem;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .section-title {
      font-size: 1.875rem;
      font-weight: 700;
      color: #111827;
      margin-bottom: 0.5rem;
    }

    .section-description {
      font-size: 1.125rem;
      color: #6b7280;
      margin-bottom: 2rem;
    }

    /* Code Block */
    .code-block {
      background: #1f2937;
      color: #f9fafb;
      padding: 1.5rem;
      border-radius: 8px;
      overflow-x: auto;
      font-family: 'Monaco', 'Courier New', monospace;
      font-size: 0.875rem;
      line-height: 1.6;
      margin: 1rem 0;
    }

    .code-block .comment {
      color: #9ca3af;
    }

    .code-block .string {
      color: #fbbf24;
    }

    .code-block .keyword {
      color: #a78bfa;
    }

    /* Feature Grid */
    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      margin: 2rem 0;
    }

    .feature-card {
      background: #f9fafb;
      padding: 1.5rem;
      border-radius: 8px;
      border: 1px solid #e5e7eb;
    }

    .feature-card h3 {
      font-size: 1.125rem;
      font-weight: 600;
      color: #111827;
      margin-bottom: 0.5rem;
    }

    .feature-card p {
      font-size: 0.875rem;
      color: #6b7280;
    }

    /* Widget Container */
    .widget-container {
      background: #f9fafb;
      border: 2px dashed #d1d5db;
      border-radius: 12px;
      padding: 2rem;
      min-height: 400px;
      margin: 2rem 0;
    }

    /* Modal Trigger */
    .modal-trigger {
      background: #667eea;
      color: white;
      border: none;
      padding: 1rem 2.5rem;
      font-size: 1.125rem;
      font-weight: 600;
      border-radius: 50px;
      cursor: pointer;
      box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
      transition: all 0.2s;
      display: inline-block;
    }

    .modal-trigger:hover {
      transform: translateY(-2px);
      box-shadow: 0 15px 30px rgba(102, 126, 234, 0.4);
      background: #5a67d8;
    }

    .modal-trigger:active {
      transform: translateY(0);
    }

    /* Event Log */
    .event-log {
      background: #111827;
      color: #f9fafb;
      padding: 1.5rem;
      border-radius: 8px;
      font-family: 'Monaco', 'Courier New', monospace;
      font-size: 0.875rem;
      max-height: 400px;
      overflow-y: auto;
      margin: 2rem 0;
    }

    .event-log .event {
      padding: 0.5rem 0;
      border-bottom: 1px solid #374151;
    }

    .event-log .event:last-child {
      border-bottom: none;
    }

    .event-log .timestamp {
      color: #9ca3af;
      font-size: 0.75rem;
    }

    .event-log .event-type {
      color: #34d399;
      font-weight: 600;
    }

    .event-log .event-data {
      color: #fbbf24;
      margin-left: 1rem;
    }

    /* Footer */
    .footer {
      background: #111827;
      color: white;
      padding: 2rem 1.5rem;
      text-align: center;
      margin-top: 4rem;
    }

    .footer a {
      color: #667eea;
      text-decoration: none;
    }

    .footer a:hover {
      text-decoration: underline;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .header h1 {
        font-size: 1.875rem;
      }

      .section {
        padding: 1.5rem;
      }

      .nav-content {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <div class="header">
    <h1>MAIS Widget Demo</h1>
    <p>Complete integration examples for embedded and modal modes</p>
  </div>

  <!-- Navigation -->
  <nav class="nav">
    <div class="nav-content">
      <a href="#embedded" class="nav-button">Embedded Mode</a>
      <a href="#modal" class="nav-button">Modal Mode</a>
      <a href="#events" class="nav-button">Event Handling</a>
      <a href="#documentation" class="nav-button">Documentation</a>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="container">

    <!-- Introduction -->
    <section class="section">
      <h2 class="section-title">Welcome to the MAIS Widget Demo</h2>
      <p class="section-description">
        This page demonstrates both integration modes for the MAIS booking widget.
        Scroll down to see live examples and copy the code snippets.
      </p>

      <div class="feature-grid">
        <div class="feature-card">
          <h3>ðŸŽ¨ Auto-Branding</h3>
          <p>Widget automatically inherits your brand colors, logo, and fonts from the admin dashboard.</p>
        </div>
        <div class="feature-card">
          <h3>ðŸ“± Mobile Responsive</h3>
          <p>Fully responsive design that works perfectly on all devices and screen sizes.</p>
        </div>
        <div class="feature-card">
          <h3>âš¡ Fast Loading</h3>
          <p>Optimized for performance with async loading and code splitting.</p>
        </div>
        <div class="feature-card">
          <h3>ðŸ”’ Secure</h3>
          <p>iframe isolation, HTTPS-only, domain allowlists, and encrypted API keys.</p>
        </div>
      </div>
    </section>

    <!-- Embedded Mode -->
    <section class="section" id="embedded">
      <h2 class="section-title">1. Embedded Mode</h2>
      <p class="section-description">
        The widget renders inline within your page content. Perfect for dedicated booking pages.
      </p>

      <h3 style="margin-bottom: 1rem; color: #374151; font-size: 1.25rem;">Code Example:</h3>
      <div class="code-block">
<span class="comment">&lt;!-- Embedded Widget Container --&gt;</span>
&lt;div id=<span class="string">"mais-booking-widget"</span>&gt;&lt;/div&gt;

&lt;script&gt;
  (<span class="keyword">function</span>(){
    window.MaisConfig = {
      apiKey: <span class="string">'pk_live_yourcompany_abc123xyz789'</span>,
      container: <span class="string">'#mais-booking-widget'</span>,
      mode: <span class="string">'embedded'</span>
    };
    <span class="keyword">var</span> s = document.createElement(<span class="string">'script'</span>);
    s.src = <span class="string">'https://widget.mais.com/sdk/mais-sdk.js'</span>;
    s.async = <span class="keyword">true</span>;
    document.head.appendChild(s);
  })();
&lt;/script&gt;
      </div>

      <h3 style="margin: 2rem 0 1rem; color: #374151; font-size: 1.25rem;">Live Example:</h3>
      <div class="widget-container">
        <div id="mais-booking-widget-embedded"></div>
      </div>

      <p style="font-size: 0.875rem; color: #6b7280; margin-top: 1rem;">
        <strong>Note:</strong> This is a placeholder. Replace with your actual API key to see the live widget.
      </p>
    </section>

    <!-- Modal Mode -->
    <section class="section" id="modal">
      <h2 class="section-title">2. Modal/Popup Mode</h2>
      <p class="section-description">
        The widget opens in a modal overlay when triggered by a button click. Great for CTAs.
      </p>

      <h3 style="margin-bottom: 1rem; color: #374151; font-size: 1.25rem;">Code Example:</h3>
      <div class="code-block">
<span class="comment">&lt;!-- Modal Trigger Button --&gt;</span>
&lt;button id=<span class="string">"book-now-button"</span>&gt;Book Your Date&lt;/button&gt;

&lt;script&gt;
  (<span class="keyword">function</span>(){
    window.MaisConfig = {
      apiKey: <span class="string">'pk_live_yourcompany_abc123xyz789'</span>,
      mode: <span class="string">'modal'</span>,
      trigger: <span class="string">'#book-now-button'</span>
    };
    <span class="keyword">var</span> s = document.createElement(<span class="string">'script'</span>);
    s.src = <span class="string">'https://widget.mais.com/sdk/mais-sdk.js'</span>;
    s.async = <span class="keyword">true</span>;
    document.head.appendChild(s);
  })();
&lt;/script&gt;
      </div>

      <h3 style="margin: 2rem 0 1rem; color: #374151; font-size: 1.25rem;">Live Example:</h3>
      <div style="text-align: center; padding: 2rem;">
        <button id="book-now-button" class="modal-trigger">
          Book Your Wedding Date
        </button>
      </div>

      <p style="font-size: 0.875rem; color: #6b7280; margin-top: 1rem;">
        <strong>Note:</strong> Click the button above to open the booking widget in modal mode.
      </p>
    </section>

    <!-- Event Handling -->
    <section class="section" id="events">
      <h2 class="section-title">3. Event Handling</h2>
      <p class="section-description">
        The widget emits events at key points in the booking flow. Use these for analytics and custom workflows.
      </p>

      <h3 style="margin-bottom: 1rem; color: #374151; font-size: 1.25rem;">Code Example:</h3>
      <div class="code-block">
&lt;script&gt;
  window.MaisConfig = {
    apiKey: <span class="string">'pk_live_yourcompany_abc123xyz789'</span>,

    <span class="comment">// Booking started</span>
    onBookingStarted: <span class="keyword">function</span>(data) {
      console.log(<span class="string">'Booking started:'</span>, data);

      <span class="comment">// Send to Google Analytics</span>
      <span class="keyword">if</span> (window.gtag) {
        gtag(<span class="string">'event'</span>, <span class="string">'begin_checkout'</span>, {
          currency: <span class="string">'USD'</span>,
          value: data.packagePrice / 100
        });
      }
    },

    <span class="comment">// Booking completed</span>
    onBookingComplete: <span class="keyword">function</span>(booking) {
      console.log(<span class="string">'Booking completed:'</span>, booking);

      <span class="comment">// Send to Google Analytics</span>
      <span class="keyword">if</span> (window.gtag) {
        gtag(<span class="string">'event'</span>, <span class="string">'purchase'</span>, {
          transaction_id: booking.bookingId,
          value: booking.totalPrice / 100,
          currency: <span class="string">'USD'</span>
        });
      }

      <span class="comment">// Redirect to thank you page</span>
      window.location.href = <span class="string">'/thank-you?booking='</span> + booking.bookingId;
    },

    <span class="comment">// Error handling</span>
    onError: <span class="keyword">function</span>(error) {
      console.error(<span class="string">'Widget error:'</span>, error);
      alert(<span class="string">'Oops! '</span> + error.message);
    }
  };
&lt;/script&gt;
      </div>

      <h3 style="margin: 2rem 0 1rem; color: #374151; font-size: 1.25rem;">Event Log:</h3>
      <div class="event-log" id="event-log">
        <div class="event">
          <span class="timestamp">Waiting for events...</span>
        </div>
      </div>

      <p style="font-size: 0.875rem; color: #6b7280; margin-top: 1rem;">
        <strong>Note:</strong> Events will appear here as you interact with the widget above.
      </p>
    </section>

    <!-- Configuration Options -->
    <section class="section">
      <h2 class="section-title">4. Advanced Configuration</h2>
      <p class="section-description">
        Customize the widget behavior with advanced configuration options.
      </p>

      <div class="code-block">
&lt;script&gt;
  window.MaisConfig = {
    <span class="comment">// Required</span>
    apiKey: <span class="string">'pk_live_yourcompany_abc123xyz789'</span>,

    <span class="comment">// Optional configuration</span>
    mode: <span class="string">'embedded'</span>,              <span class="comment">// 'embedded' or 'modal'</span>
    container: <span class="string">'#mais-booking-widget'</span>,  <span class="comment">// CSS selector</span>
    theme: <span class="string">'auto'</span>,                     <span class="comment">// 'light', 'dark', or 'auto'</span>

    <span class="comment">// Pre-fill options</span>
    defaultPackage: <span class="string">'intimate-ceremony'</span>, <span class="comment">// Pre-select package by slug</span>
    defaultDate: <span class="string">'2025-06-15'</span>,           <span class="comment">// Pre-select date (YYYY-MM-DD)</span>

    prefill: {
      name: <span class="string">'John Smith'</span>,
      email: <span class="string">'john@example.com'</span>,
      guestCount: 25
    },

    <span class="comment">// Customization</span>
    className: <span class="string">'my-custom-widget'</span>,
    locale: <span class="string">'en-US'</span>,

    <span class="comment">// Event callbacks</span>
    onWidgetLoaded: <span class="keyword">function</span>() {
      console.log(<span class="string">'Widget ready'</span>);
    },
    onBookingStarted: <span class="keyword">function</span>(data) {
      console.log(<span class="string">'Booking started'</span>, data);
    },
    onBookingComplete: <span class="keyword">function</span>(booking) {
      console.log(<span class="string">'Booking complete'</span>, booking);
    },
    onError: <span class="keyword">function</span>(error) {
      console.error(<span class="string">'Error'</span>, error);
    }
  };
&lt;/script&gt;
      </div>
    </section>

    <!-- Documentation -->
    <section class="section" id="documentation">
      <h2 class="section-title">5. Documentation & Resources</h2>
      <p class="section-description">
        Learn more about integrating and customizing the MAIS widget.
      </p>

      <div class="feature-grid">
        <div class="feature-card">
          <h3>ðŸ“š Integration Guide</h3>
          <p>
            Complete documentation with examples, configuration options, and troubleshooting.
            <br><br>
            <a href="../WIDGET_INTEGRATION_GUIDE.md" style="color: #667eea; text-decoration: none; font-weight: 600;">
              Read the guide â†’
            </a>
          </p>
        </div>

        <div class="feature-card">
          <h3>ðŸ”§ API Reference</h3>
          <p>
            Detailed API documentation for programmatic widget control and event handling.
            <br><br>
            <a href="https://docs.mais.com/api" style="color: #667eea; text-decoration: none; font-weight: 600;">
              View API docs â†’
            </a>
          </p>
        </div>

        <div class="feature-card">
          <h3>ðŸ’¬ Support</h3>
          <p>
            Need help? Contact our support team via email or live chat in the admin dashboard.
            <br><br>
            <a href="mailto:support@mais.com" style="color: #667eea; text-decoration: none; font-weight: 600;">
              support@mais.com
            </a>
          </p>
        </div>

        <div class="feature-card">
          <h3>ðŸŽ¨ Branding</h3>
          <p>
            Customize widget colors, logo, and fonts from your MAIS admin dashboard.
            <br><br>
            <a href="https://admin.mais.com/settings/branding" style="color: #667eea; text-decoration: none; font-weight: 600;">
              Customize branding â†’
            </a>
          </p>
        </div>
      </div>
    </section>

    <!-- Best Practices -->
    <section class="section">
      <h2 class="section-title">6. Best Practices</h2>
      <p class="section-description">
        Tips for optimal widget integration and performance.
      </p>

      <div style="display: grid; gap: 1rem;">
        <div style="padding: 1rem; background: #f0fdf4; border-left: 4px solid #22c55e; border-radius: 4px;">
          <strong style="color: #166534;">âœ“ Use async loading</strong>
          <p style="color: #166534; margin-top: 0.5rem; font-size: 0.875rem;">
            Always load the widget SDK with <code>async = true</code> to prevent blocking page render.
          </p>
        </div>

        <div style="padding: 1rem; background: #f0fdf4; border-left: 4px solid #22c55e; border-radius: 4px;">
          <strong style="color: #166534;">âœ“ Enable HTTPS</strong>
          <p style="color: #166534; margin-top: 0.5rem; font-size: 0.875rem;">
            The widget requires HTTPS in production. Use localhost for development only.
          </p>
        </div>

        <div style="padding: 1rem; background: #f0fdf4; border-left: 4px solid #22c55e; border-radius: 4px;">
          <strong style="color: #166534;">âœ“ Add domain allowlist</strong>
          <p style="color: #166534; margin-top: 0.5rem; font-size: 0.875rem;">
            Restrict widget usage to your domains in Settings â†’ Security â†’ Allowed Domains.
          </p>
        </div>

        <div style="padding: 1rem; background: #fef2f2; border-left: 4px solid #ef4444; border-radius: 4px;">
          <strong style="color: #991b1b;">âœ— Never expose secret keys</strong>
          <p style="color: #991b1b; margin-top: 0.5rem; font-size: 0.875rem;">
            Only use public keys (pk_live_*) in client-side code. Never embed secret keys (sk_live_*).
          </p>
        </div>

        <div style="padding: 1rem; background: #fef2f2; border-left: 4px solid #ef4444; border-radius: 4px;">
          <strong style="color: #991b1b;">âœ— Don't set fixed height</strong>
          <p style="color: #991b1b; margin-top: 0.5rem; font-size: 0.875rem;">
            Let the widget auto-resize. Avoid setting fixed height on the container.
          </p>
        </div>
      </div>
    </section>

  </div>

  <!-- Footer -->
  <footer class="footer">
    <p>
      MAIS Widget Demo &copy; 2025 |
      <a href="../WIDGET_INTEGRATION_GUIDE.md">Documentation</a> |
      <a href="https://mais.com">Official Website</a> |
      <a href="mailto:support@mais.com">Support</a>
    </p>
  </footer>

  <!-- Event Logging Script -->
  <script>
    // Event logging for demo purposes
    const eventLog = document.getElementById('event-log');

    function logEvent(type, data) {
      const timestamp = new Date().toLocaleTimeString();
      const eventDiv = document.createElement('div');
      eventDiv.className = 'event';
      eventDiv.innerHTML = `
        <span class="timestamp">[${timestamp}]</span>
        <span class="event-type">${type}</span>
        <span class="event-data">${JSON.stringify(data, null, 2)}</span>
      `;
      eventLog.appendChild(eventDiv);
      eventLog.scrollTop = eventLog.scrollHeight;
    }

    // Listen for widget events
    window.addEventListener('message', function(event) {
      // In production, validate origin:
      // if (event.origin !== 'https://widget.mais.com') return;

      const data = event.data;

      switch (data.type) {
        case 'mais:loaded':
          logEvent('Widget Loaded', { ready: true });
          break;

        case 'mais:booking:started':
          logEvent('Booking Started', {
            package: data.packageName,
            date: data.eventDate
          });
          break;

        case 'mais:booking:completed':
          logEvent('Booking Completed', {
            bookingId: data.bookingId,
            total: '$' + (data.totalPrice / 100).toFixed(2)
          });
          break;

        case 'mais:error':
          logEvent('Error', {
            code: data.code,
            message: data.message
          });
          break;

        case 'mais:resize':
          // Auto-resize events are frequent, skip logging
          break;
      }
    });

    // Placeholder for widget initialization
    // Replace with your actual API key to see live widget

    /*
    (function(){
      window.MaisConfig = {
        apiKey: 'pk_live_yourcompany_abc123xyz789',
        container: '#mais-booking-widget-embedded',
        mode: 'embedded',

        onWidgetLoaded: function() {
          logEvent('Widget Loaded', { ready: true });
        },

        onBookingStarted: function(data) {
          logEvent('Booking Started', data);
        },

        onBookingComplete: function(booking) {
          logEvent('Booking Completed', booking);

          // Example: Send to Google Analytics
          if (window.gtag) {
            gtag('event', 'purchase', {
              transaction_id: booking.bookingId,
              value: booking.totalPrice / 100,
              currency: 'USD'
            });
          }
        },

        onError: function(error) {
          logEvent('Error', error);
        }
      };

      var script = document.createElement('script');
      script.src = 'https://widget.mais.com/sdk/mais-sdk.js';
      // For local development:
      // script.src = 'http://localhost:5173/widget-loader.js';
      script.async = true;
      document.head.appendChild(script);
    })();
    */

    // Show placeholder message
    setTimeout(function() {
      logEvent('Demo Mode', {
        message: 'Replace API key in code to see live widget',
        file: 'examples/widget-demo.html'
      });
    }, 1000);
  </script>

</body>
</html>
